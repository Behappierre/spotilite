<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SpotiLite – Minimal Spotify Search</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://sdk.scdn.co/spotify-player.js"></script>
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #10161d;
      --muted: #8fa0b3;
      --text: #e7eef7;
      --accent: #1db954;
      --ring: 0 0 0 3px color-mix(in oklab, var(--accent) 35%, transparent);
      --radius: 14px;
      --shadow: 0 8px 30px rgba(0,0,0,.35);
    }
    
    * { box-sizing: border-box; }
    
    html, body { 
      height: 100%; 
      background: radial-gradient(1200px 800px at 20% -20%, #14202d 0%, #0b0f14 60%), var(--bg); 
      color: var(--text); 
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; 
    }
    
    a { color: inherit; text-decoration: none; }
    
    .wrap { max-width: 980px; margin: 0 auto; padding: 28px; }
    
    header { 
      display:flex; 
      align-items:center; 
      justify-content:space-between; 
      gap: 16px; 
      margin-bottom: 24px; 
    }
    
    .logo { 
      display:flex; 
      align-items:center; 
      gap: 12px; 
      font-weight: 700; 
      letter-spacing:.2px; 
    }
    
    .dot { 
      width: 12px; 
      height: 12px; 
      border-radius: 50%; 
      background: var(--accent); 
      box-shadow: 0 0 0 6px rgba(29,185,84,.2); 
    }
    
    .title { font-size: 18px; color: #cfe2f2; }
    
    .card { 
      background: color-mix(in oklab, var(--panel) 92%, #0a0a0a); 
      border: 1px solid rgba(255,255,255,.05); 
      border-radius: var(--radius); 
      box-shadow: var(--shadow); 
      overflow: clip; 
    }
    
    .toolbar { 
      position: sticky; 
      top: 0; 
      z-index: 100; 
      background: color-mix(in oklab, var(--panel) 92%, #0a0a0a); 
      display:flex; 
      align-items:center; 
      gap: 10px; 
      padding: 14px; 
      border-bottom: 1px solid rgba(255,255,255,.06); 
      backdrop-filter: blur(10px);
    }
    
    .btn, button { 
      background: linear-gradient(180deg, #1db954, #159c45); 
      color: white; 
      border: 0; 
      padding: 10px 14px; 
      border-radius: 999px; 
      font-weight: 600; 
      cursor: pointer; 
      transition: transform .06s ease, box-shadow .2s ease; 
    }
    
    .btn:hover { 
      transform: translateY(-1px); 
      box-shadow: 0 6px 18px rgba(29,185,84,.25); 
    }
    
    .btn.secondary { 
      background: #151c24; 
      color: #cfe2f2; 
      border: 1px solid rgba(255,255,255,.08); 
    }
    
    .right { margin-left: auto; display:flex; gap:8px; }
    
    .searchbar { 
      display:flex; 
      align-items:center; 
      gap:10px; 
      width: 100%; 
    }
    
    .searchbar input {
      width: 100%; 
      padding: 12px 14px; 
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.08); 
      background: #0e141b; 
      color: var(--text);
      outline: none; 
      box-shadow: none; 
      font-size: 15px;
    }
    
    .searchbar input:focus { 
      box-shadow: var(--ring); 
      border-color: color-mix(in oklab, var(--accent) 30%, #000); 
    }
    
    .pills { display:flex; flex-wrap: wrap; gap: 6px; }
    
    .pill { 
      padding: 7px 12px; 
      border-radius: 999px; 
      background: #0f1720; 
      border: 1px solid rgba(255,255,255,.08); 
      color: #cfe2f2; 
      cursor: pointer; 
      font-weight: 600; 
      font-size: 12px; 
      letter-spacing:.2px; 
    }
    
    .pill.active { 
      background: #132534; 
      border-color: #1db95455; 
      color: #dff6e8; 
    }
    
    .results { 
      padding: 10px; 
      display:grid; 
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); 
      gap: 14px; 
    }
    
    .item { 
      background: #0e151d; 
      border: 1px solid rgba(255,255,255,.06); 
      border-radius: 14px; 
      overflow:hidden; 
      display:flex; 
      flex-direction:column; 
    }
    
    .cover { 
      width:100%; 
      aspect-ratio: 1/1; 
      background:#121a23; 
      object-fit: cover; 
    }
    
    .meta { 
      padding: 10px 12px; 
      display:flex; 
      flex-direction:column; 
      gap: 6px; 
    }
    
    .name { font-weight: 700; line-height: 1.2; }
    .sub { color: var(--muted); font-size: 12px; }
    .row { display:flex; align-items:center; gap: 8px; }
    
    .open { 
      display:inline-flex; 
      align-items:center; 
      gap:6px; 
      font-size: 12px; 
      padding: 6px 9px; 
      border-radius: 999px; 
      background: #0f1b12; 
      border: 1px solid #1db95444; 
      color: #aee6bf; 
    }
    
    .btn-play { 
      display:inline-flex; 
      align-items:center; 
      gap:6px; 
      font-size: 12px; 
      padding: 6px 9px; 
      border-radius: 999px; 
      background: #1db954; 
      border: 1px solid #1db954; 
      color: white; 
      cursor: pointer; 
      font-weight: 600; 
      transition: all 0.2s ease; 
    }
    
    .btn-play:hover { 
      background: #1ed760; 
      transform: scale(1.05); 
    }
    
    footer { 
      margin-top: 14px; 
      color: #93a9be; 
      font-size: 12px; 
      opacity: .9; 
    }
    
    .notice { 
      margin-top: 10px; 
      color:#93a9be; 
    }
    
    .avatar { 
      width:28px; 
      height:28px; 
      border-radius:50%; 
      border:1px solid rgba(255,255,255,.2); 
    }
    
    .tag { 
      font-size: 11px; 
      padding: 4px 8px; 
      border: 1px solid rgba(255,255,255,.12); 
      border-radius: 999px; 
      color:#b9c9da; 
    }
    
    .empty { 
      padding: 22px; 
      color:#9fb3c7; 
    }
    
    .audio-player { 
      position: fixed; 
      bottom: 0; 
      left: 0; 
      right: 0; 
      background: #0e151d; 
      border-top: 1px solid rgba(255,255,255,.1); 
      padding: 16px; 
      z-index: 1000; 
      display: none; 
    }
    
    .audio-player.active { display: block; }
    
    .audio-player-content { 
      max-width: 980px; 
      margin: 0 auto; 
      display: flex; 
      align-items: center; 
      gap: 16px; 
    }
    
    .now-playing { flex: 1; }
    
    .now-playing-title { 
      font-weight: 700; 
      color: #e7eef7; 
      margin-bottom: 4px; 
    }
    
    .now-playing-artist { 
      font-size: 12px; 
      color: #8fa0b3; 
    }
    
    .audio-controls { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
    }
    
    .audio-controls button { 
      background: none; 
      border: none; 
      color: #e7eef7; 
      cursor: pointer; 
      padding: 8px; 
      border-radius: 50%; 
      transition: background 0.2s ease; 
    }
    
    .audio-controls button:hover { 
      background: rgba(255,255,255,.1); 
    }
    
    .progress-bar { 
      flex: 1; 
      height: 4px; 
      background: rgba(255,255,255,.1); 
      border-radius: 2px; 
      overflow: hidden; 
      cursor: pointer;
      position: relative;
    }
    
    .progress-bar:hover { 
      height: 6px; 
      background: rgba(255,255,255,.15);
    }
    
    .progress-fill { 
      height: 100%; 
      background: #1db954; 
      width: 0%; 
      transition: width 0.1s ease; 
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">
        <span class="dot"></span>
        <span class="title">SpotiLite</span>
      </div>
      <div class="right" id="authArea">
        <!-- Filled by TypeScript -->
      </div>
    </header>

    <div class="card">
      <div class="toolbar">
        <form id="searchForm" class="searchbar" autocomplete="off">
          <input id="q" placeholder="Search songs, artists, albums, playlists…" />
          <button class="btn" type="submit">Search</button>
        </form>
        <div class="right pills" id="typePills">
          <!-- Filled by TypeScript -->
        </div>
      </div>
      <div id="results" class="results">
        <!-- Filled by TypeScript -->
      </div>
      <div id="empty" class="empty" style="display:none;">
        Try a search to see results here.
      </div>
    </div>

    <footer>
      Built with Spotify Web API + Web Playback SDK. Full playback available with Premium account. 
    </footer>
    <div class="notice" id="notice"></div>
  </div>

  <!-- Audio Player -->
  <div class="audio-player" id="audioPlayer">
    <div class="audio-player-content">
      <div class="now-playing">
        <div class="now-playing-title" id="nowPlayingTitle">No track playing</div>
        <div class="now-playing-artist" id="nowPlayingArtist"></div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="audio-controls">
        <button id="prevBtn" title="Previous Track">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
          </svg>
        </button>
        <button id="playPauseBtn" title="Play">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
        </button>
        <button id="nextBtn" title="Next Track">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M16 6h2v12h-2zm-3.5 6l-8.5 6V6z"/>
          </svg>
        </button>
        <button id="stopBtn" title="Stop">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 6h12v12H6z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
